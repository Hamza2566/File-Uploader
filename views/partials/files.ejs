<div class="files-header">
  <% if(folders.length < 2){%>
    <a href="/folders">🏠 ⬅️</a>
      <a href="/folders/delete/<%= folders[0].id%>" class="deletefolder">Delete <%=folders[0].name%></a>
      <a href="/folders/edit/<%= folders[0].id%>" class="editfolder">Edit <%=folders[0].name%></a>




  <%}%>
  
  <% if (folders && folders.length > 1) { %>
    <h2>📂  All Files In The Storage</h2>
<% } else { %>
    <input type="submit" value="📄 New File" class="newfile" />
<% } %>


</div>


<!-- ======================
     File Modal (Upload New File)
====================== -->
<div class="modal-file" id="newFileModal">
  <div class="modal-file-content">
    <span class="file-close">&times;</span>
    <h2>Upload New File</h2>
    <form action="/upload/<%= folders[0].id%>" method="POST" enctype="multipart/form-data">
      <input type="file" name="avatar" id="file" required />
      <button type="submit" class="model-button">Upload</button>
    </form>
  </div>
</div>


<!-- ======================
     Files List
====================== -->
<div class="files-content">
  <% if (folders && folders.length > 0) { %>
     <% if(folders.length < 2){%>
    <h2>📂  <%= folders[0].name%></h2>
  <%}%>
  <table border="1" cellpadding="8" cellspacing="0" class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Size</th>
        <th>Folder</th>
        <th>Created At</th>
        <th>Options</th>
      </tr>
    </thead>
    <tbody>
      <% folders.forEach(folder => { %>
        <% if (folder.files && folder.files.length > 0) { %>
          <% folder.files.forEach(file => { %>
            <tr>
              <td><%= file.name %></td>
              <td>
  <% if (file.size === 0) { %>
    -
  <% } else if (file.size < 1024) { %>
    <%= file.size %> B
  <% } else if (file.size < 1024 * 1024) { %>
    <%= Math.floor(file.size / 1024) %> KB
  <% } else { %>
    <%= Math.floor(file.size / (1024 * 1024)) %> MB
  <% } %>
</td>

              <td><%= folder.name %></td>
              <td><%= file.createdAt.toLocaleString() %></td>
              <td class="options">
              <a href="/files/delete/<%= file.id %>?folderId=<%= file.folderId %>" class="delete"> Delete</a>


              
              </td>
            </tr>
          <% }) %>
        <% } %>
      <% }) %>
    </tbody>
  </table>
<% } else { %>
  <h3>No folders found</h3>
<% } %>

</div>
